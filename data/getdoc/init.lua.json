{
  "_filename": "init.lua",
  "_isShebang": false,
  "_isSpec": false,
  "_isTest": false,
  "_path": "modules/getdoc/src/getdoc/init.lua",
  "edges": [ {
    "from": 0,
    "label": "implements",
    "to": 1
  }, {
    "from": 3,
    "label": "has",
    "to": 4
  }, {
    "from": 3,
    "label": "has",
    "to": 5
  }, {
    "from": 5,
    "label": "has",
    "to": 6
  }, {
    "from": 5,
    "label": "has",
    "to": 7
  }, {
    "from": 7,
    "label": "has",
    "to": 8
  }, {
    "from": 8,
    "label": "has",
    "to": 9
  }, {
    "from": 8,
    "label": "has",
    "to": 10
  }, {
    "from": 8,
    "label": "has",
    "to": 11
  }, {
    "from": 8,
    "label": "has",
    "to": 12
  }, {
    "from": 12,
    "label": "has",
    "to": 13
  }, {
    "from": 12,
    "label": "has",
    "to": 14
  }, {
    "from": 14,
    "label": "has",
    "to": 15
  }, {
    "from": 3,
    "label": "has",
    "to": 16
  }, {
    "from": 3,
    "label": "has",
    "to": 17
  }, {
    "from": 18,
    "label": "has",
    "to": 19
  }, {
    "from": 19,
    "label": "has",
    "to": 20
  }, {
    "from": 20,
    "label": "has",
    "to": 21
  }, {
    "from": 20,
    "label": "has",
    "to": 22
  }, {
    "from": 20,
    "label": "has",
    "to": 23
  }, {
    "from": 20,
    "label": "has",
    "to": 24
  }, {
    "from": 19,
    "label": "has",
    "to": 25
  }, {
    "from": 25,
    "label": "has",
    "to": 26
  }, {
    "from": 25,
    "label": "has",
    "to": 27
  }, {
    "from": 25,
    "label": "has",
    "to": 28
  }, {
    "from": 25,
    "label": "has",
    "to": 29
  }, {
    "from": 25,
    "label": "has",
    "to": 30
  }, {
    "from": 25,
    "label": "has",
    "to": 31
  }, {
    "from": 18,
    "label": "has",
    "to": 16
  }, {
    "from": 18,
    "label": "has",
    "to": 32
  }, {
    "from": 32,
    "label": "has",
    "to": 33
  }, {
    "from": 33,
    "label": "has",
    "to": 9
  }, {
    "from": 33,
    "label": "has",
    "to": 10
  }, {
    "from": 33,
    "label": "has",
    "to": 11
  }, {
    "from": 33,
    "label": "has",
    "to": 34
  }, {
    "from": 34,
    "label": "has",
    "to": 35
  }, {
    "from": 34,
    "label": "has",
    "to": 36
  }, {
    "from": 34,
    "label": "has",
    "to": 37
  }, {
    "from": 34,
    "label": "has",
    "to": 38
  }, {
    "from": 34,
    "label": "has",
    "to": 39
  }, {
    "from": 34,
    "label": "has",
    "to": 40
  }, {
    "from": 34,
    "label": "has",
    "to": 41
  }, {
    "from": 34,
    "label": "has",
    "to": 42
  }, {
    "from": 34,
    "label": "has",
    "to": 43
  }, {
    "from": 34,
    "label": "has",
    "to": 44
  }, {
    "from": 34,
    "label": "has",
    "to": 45
  }, {
    "from": 45,
    "label": "has",
    "to": 46
  }, {
    "from": 45,
    "label": "has",
    "to": 47
  }, {
    "from": 45,
    "label": "has",
    "to": 48
  }, {
    "from": 45,
    "label": "has",
    "to": 27
  }, {
    "from": 45,
    "label": "has",
    "to": 49
  }, {
    "from": 45,
    "label": "has",
    "to": 50
  }, {
    "from": 45,
    "label": "has",
    "to": 51
  }, {
    "from": 45,
    "label": "has",
    "to": 31
  }, {
    "from": 18,
    "label": "has",
    "to": 52
  }, {
    "from": 53,
    "label": "has",
    "to": 54
  }, {
    "from": 53,
    "label": "has",
    "to": 55
  }, {
    "from": 53,
    "label": "has",
    "to": 56
  }, {
    "from": 53,
    "label": "has",
    "to": 57
  }, {
    "from": 53,
    "label": "has",
    "to": 58
  }, {
    "from": 53,
    "label": "has",
    "to": 59
  }, {
    "from": 59,
    "label": "has",
    "to": 60
  }, {
    "from": 53,
    "label": "has",
    "to": 61
  }, {
    "from": 61,
    "label": "has",
    "to": 62
  }, {
    "from": 61,
    "label": "has",
    "to": 63
  }, {
    "from": 61,
    "label": "has",
    "to": 64
  }, {
    "from": 61,
    "label": "has",
    "to": 65
  }, {
    "from": 61,
    "label": "has",
    "to": 66
  }, {
    "from": 53,
    "label": "has",
    "to": 16
  }, {
    "from": 53,
    "label": "has",
    "to": 67
  }, {
    "from": 53,
    "label": "has",
    "to": 68
  }, {
    "from": 68,
    "label": "has",
    "to": 69
  }, {
    "from": 69,
    "label": "has",
    "to": 70
  }, {
    "from": 69,
    "label": "has",
    "to": 71
  }, {
    "from": 69,
    "label": "has",
    "to": 72
  }, {
    "from": 69,
    "label": "has",
    "to": 73
  }, {
    "from": 69,
    "label": "has",
    "to": 74
  }, {
    "from": 69,
    "label": "has",
    "to": 75
  }, {
    "from": 68,
    "label": "has",
    "to": 76
  }, {
    "from": 53,
    "label": "has",
    "to": 16
  }, {
    "from": 53,
    "label": "has",
    "to": 77
  }, {
    "from": 77,
    "label": "has",
    "to": 76
  }, {
    "from": 77,
    "label": "has",
    "to": 78
  }, {
    "from": 78,
    "label": "has",
    "to": 79
  }, {
    "from": 79,
    "label": "has",
    "to": 80
  }, {
    "from": 53,
    "label": "has",
    "to": 81
  }, {
    "from": 53,
    "label": "has",
    "to": 16
  }, {
    "from": 53,
    "label": "has",
    "to": 82
  }, {
    "from": 3,
    "label": "calls",
    "to": 95
  }, {
    "from": 18,
    "label": "calls",
    "to": 95
  }, {
    "from": 53,
    "label": "calls",
    "to": 96
  }, {
    "from": 18,
    "label": "calls",
    "to": 90
  }, {
    "from": 53,
    "label": "calls",
    "to": 90
  }, {
    "from": 53,
    "label": "calls",
    "to": 90
  }, {
    "from": 53,
    "label": "calls",
    "to": 90
  }, {
    "from": 53,
    "label": "calls",
    "to": 90
  }, {
    "from": 53,
    "label": "calls",
    "to": 90
  }, {
    "from": 53,
    "label": "calls",
    "to": 90
  }, {
    "from": 53,
    "label": "calls",
    "to": 90
  }, {
    "from": 53,
    "label": "calls",
    "to": 90
  }, {
    "from": 18,
    "label": "calls",
    "to": 94
  }, {
    "from": 18,
    "label": "calls",
    "to": 94
  }, {
    "from": 18,
    "label": "calls",
    "to": 94
  }, {
    "from": 3,
    "label": "calls",
    "to": 3
  }, {
    "from": 18,
    "label": "calls",
    "to": 3
  }, {
    "from": 18,
    "label": "calls",
    "to": 3
  }, {
    "from": 18,
    "label": "calls",
    "to": 3
  }, {
    "from": 3,
    "label": "calls",
    "to": 104
  }, {
    "from": 3,
    "label": "calls",
    "to": 104
  }, {
    "from": 18,
    "label": "calls",
    "to": 104
  }, {
    "from": 18,
    "label": "calls",
    "to": 104
  }, {
    "from": 53,
    "label": "calls",
    "to": 87
  }, {
    "from": 53,
    "label": "calls",
    "to": 87
  }, {
    "from": 53,
    "label": "calls",
    "to": 87
  }, {
    "from": 53,
    "label": "calls",
    "to": 87
  }, {
    "from": 53,
    "label": "calls",
    "to": 87
  }, {
    "from": 53,
    "label": "calls",
    "to": 87
  }, {
    "from": 53,
    "label": "calls",
    "to": 87
  }, {
    "from": 3,
    "label": "calls",
    "to": 84
  }, {
    "from": 3,
    "label": "calls",
    "to": 84
  }, {
    "from": 18,
    "label": "calls",
    "to": 86
  }, {
    "from": 18,
    "label": "calls",
    "to": 86
  }, {
    "from": 18,
    "label": "calls",
    "to": 86
  }, {
    "from": 53,
    "label": "calls",
    "to": 99
  }, {
    "from": 18,
    "label": "calls",
    "to": 91
  }, {
    "from": 18,
    "label": "calls",
    "to": 91
  }, {
    "from": 18,
    "label": "calls",
    "to": 91
  }, {
    "from": 3,
    "label": "calls",
    "to": 93
  }, {
    "from": 18,
    "label": "calls",
    "to": 93
  }, {
    "from": 3,
    "label": "calls",
    "to": 92
  }, {
    "from": 18,
    "label": "calls",
    "to": 92
  }, {
    "from": 18,
    "label": "calls",
    "to": 18
  }, {
    "from": 3,
    "label": "calls",
    "to": 97
  }, {
    "from": 18,
    "label": "calls",
    "to": 97
  }, {
    "from": 83,
    "label": "calls",
    "to": 100
  }, {
    "from": 18,
    "label": "calls",
    "to": 101
  }, {
    "from": 53,
    "label": "calls",
    "to": 102
  }, {
    "from": 83,
    "label": "calls",
    "to": 103
  }, {
    "from": 83,
    "label": "calls",
    "to": 103
  }, {
    "from": 83,
    "label": "calls",
    "to": 103
  }, {
    "from": 53,
    "label": "calls",
    "to": 103
  }, {
    "from": 53,
    "label": "calls",
    "to": 98
  }, {
    "from": 53,
    "label": "calls",
    "to": 98
  }, {
    "from": 3,
    "label": "calls",
    "to": 85
  }, {
    "from": 3,
    "label": "calls",
    "to": 85
  }, {
    "from": 1,
    "label": "contains",
    "to": 83
  }, {
    "from": 83,
    "label": "declares",
    "to": 3
  }, {
    "from": 83,
    "label": "declares",
    "to": 18
  }, {
    "from": 83,
    "label": "declares",
    "to": 53
  }, {
    "from": 1,
    "label": "contains",
    "to": 105
  }, {
    "from": 1,
    "label": "contains",
    "to": 106
  }, {
    "from": 105,
    "label": "initializes",
    "to": 107
  }, {
    "from": 107,
    "label": "assigns",
    "to": 108
  }, {
    "from": 105,
    "label": "initializes",
    "to": 109
  }, {
    "from": 109,
    "label": "assigns",
    "to": 110
  }, {
    "from": 105,
    "label": "initializes",
    "to": 111
  }, {
    "from": 111,
    "label": "assigns",
    "to": 112
  }, {
    "from": 105,
    "label": "initializes",
    "to": 113
  }, {
    "from": 113,
    "label": "assigns",
    "to": 114
  }, {
    "from": 105,
    "label": "initializes",
    "to": 115
  }, {
    "from": 115,
    "label": "assigns",
    "to": 116
  }, {
    "from": 105,
    "label": "initializes",
    "to": 117
  }, {
    "from": 117,
    "label": "assigns",
    "to": 118
  }, {
    "from": 105,
    "label": "initializes",
    "to": 119
  }, {
    "from": 119,
    "label": "assigns",
    "to": 120
  }, {
    "from": 105,
    "label": "initializes",
    "to": 121
  }, {
    "from": 121,
    "label": "assigns",
    "to": 122
  }, {
    "from": 105,
    "label": "initializes",
    "to": 123
  }, {
    "from": 123,
    "label": "assigns",
    "to": 124
  }, {
    "from": 105,
    "label": "initializes",
    "to": 125
  }, {
    "from": 106,
    "label": "initializes",
    "to": 126
  }, {
    "from": 126,
    "label": "requires",
    "to": 2
  }, {
    "from": 106,
    "label": "initializes",
    "to": 127
  }, {
    "from": 127,
    "label": "requires",
    "to": 89
  }, {
    "from": 106,
    "label": "initializes",
    "to": 128
  }, {
    "from": 128,
    "label": "requires",
    "to": 88
  } ],
  "nodes": [ {
    "id": 0,
    "text": "",
    "type": "file"
  }, {
    "id": 1,
    "text": "init",
    "type": "module"
  }, {
    "id": 2,
    "text": "util",
    "type": "module"
  }, {
    "id": 3,
    "text": "function createTableStructure(path)\r\n\tlocal root = {}\r\n\r\n\tif (string.find(path, \"%.lua\") ~= nil) then\r\n\r\n\t    root[path] = gdu.createTableOfComments(gdu.getAstFromFile(path))\r\n\r\n\telse\r\n\t    for file in lfs.dir(path) do\r\n\t        if file ~= \".\" and file ~= \"..\" then\r\n\t            local f = path..'/'..file\r\n\t            local attr = lfs.attributes (f)\r\n\t            assert (type(attr) == \"table\")\r\n\t            if attr.mode == \"directory\" then\r\n\t                root[f] = createTableStructure (f)\r\n\t            else\r\n\t            \tif string.find(file, \"%.lua\") ~= nil then\r\n\t                \troot[f] = gdu.createTableOfComments(gdu.getAstFromFile(f), file)\r\n\t            \tend\r\n\t            end\r\n\t        end\r\n\t    end\r\n\tend\r\n    return root\r\nend",
    "type": "function"
  }, {
    "id": 4,
    "text": "local root = {}",
    "type": "statement:localassign"
  }, {
    "id": 5,
    "text": "if (string.find(path, \"%.lua\") ~= nil) then\r\n\r\n\t    root[path] = gdu.createTableOfComments(gdu.getAstFromFile(path))\r\n\r\n\telse\r\n\t    for file in lfs.dir(path) do\r\n\t        if file ~= \".\" and file ~= \"..\" then\r\n\t            local f = path..'/'..file\r\n\t            local attr = lfs.attributes (f)\r\n\t            assert (type(attr) == \"table\")\r\n\t            if attr.mode == \"directory\" then\r\n\t                root[f] = createTableStructure (f)\r\n\t            else\r\n\t            \tif string.find(file, \"%.lua\") ~= nil then\r\n\t                \troot[f] = gdu.createTableOfComments(gdu.getAstFromFile(f), file)\r\n\t            \tend\r\n\t            end\r\n\t        end\r\n\t    end\r\n\tend",
    "type": "statement:if"
  }, {
    "id": 6,
    "text": "root[path] = gdu.createTableOfComments(gdu.getAstFromFile(path))",
    "type": "statement:assign"
  }, {
    "id": 7,
    "text": "for file in lfs.dir(path) do\r\n\t        if file ~= \".\" and file ~= \"..\" then\r\n\t            local f = path..'/'..file\r\n\t            local attr = lfs.attributes (f)\r\n\t            assert (type(attr) == \"table\")\r\n\t            if attr.mode == \"directory\" then\r\n\t                root[f] = createTableStructure (f)\r\n\t            else\r\n\t            \tif string.find(file, \"%.lua\") ~= nil then\r\n\t                \troot[f] = gdu.createTableOfComments(gdu.getAstFromFile(f), file)\r\n\t            \tend\r\n\t            end\r\n\t        end\r\n\t    end",
    "type": "statement:genericfor"
  }, {
    "id": 8,
    "text": "if file ~= \".\" and file ~= \"..\" then\r\n\t            local f = path..'/'..file\r\n\t            local attr = lfs.attributes (f)\r\n\t            assert (type(attr) == \"table\")\r\n\t            if attr.mode == \"directory\" then\r\n\t                root[f] = createTableStructure (f)\r\n\t            else\r\n\t            \tif string.find(file, \"%.lua\") ~= nil then\r\n\t                \troot[f] = gdu.createTableOfComments(gdu.getAstFromFile(f), file)\r\n\t            \tend\r\n\t            end\r\n\t        end",
    "type": "statement:if"
  }, {
    "id": 9,
    "text": "local f = path..'/'..file",
    "type": "statement:localassign"
  }, {
    "id": 10,
    "text": "local attr = lfs.attributes (f)",
    "type": "statement:localassign"
  }, {
    "id": 11,
    "text": "assert (type(attr) == \"table\")",
    "type": "statement:functioncall"
  }, {
    "id": 12,
    "text": "if attr.mode == \"directory\" then\r\n\t                root[f] = createTableStructure (f)\r\n\t            else\r\n\t            \tif string.find(file, \"%.lua\") ~= nil then\r\n\t                \troot[f] = gdu.createTableOfComments(gdu.getAstFromFile(f), file)\r\n\t            \tend\r\n\t            end",
    "type": "statement:if"
  }, {
    "id": 13,
    "text": "root[f] = createTableStructure (f)",
    "type": "statement:assign"
  }, {
    "id": 14,
    "text": "if string.find(file, \"%.lua\") ~= nil then\r\n\t                \troot[f] = gdu.createTableOfComments(gdu.getAstFromFile(f), file)\r\n\t            \tend",
    "type": "statement:if"
  }, {
    "id": 15,
    "text": "root[f] = gdu.createTableOfComments(gdu.getAstFromFile(f), file)",
    "type": "statement:assign"
  }, {
    "id": 16,
    "text": "return",
    "type": "statement:keyword"
  }, {
    "id": 17,
    "text": "",
    "type": "blank lines"
  }, {
    "id": 18,
    "text": "function createFileStructure(path, address)\r\n\r\n\tif (create == true) then\r\n\t\tif address ~= nil then\r\n\r\n\t\t\tlfs.mkdir(address .. \"/_getdoc\")\r\n\t\t\taddress = address .. \"/_getdoc\"\r\n\t\telse\r\n\t\t\tlfs.mkdir(\"_getdoc\")\r\n\t\t\taddress = lfs.currentdir() .. \"/_getdoc\"\r\n\r\n\t\tend\r\n\r\n\t \tif(string.find(path, \"%.lua\") ~= nil) then\r\n\t\t\tlocal file = string.match(path, \"%/%a+%.lua\")\r\n\t\t    local ast = createTableStructure(path)\r\n\r\n\t\t\taddress = address .. file\r\n\t\t\tfile = io.open(address, \"w\")\r\n\t\t\tfile:write(gdu.generateReturnTable(ast))\r\n\t\t\tfile:close()\r\n\t\t\treturn\r\n\t\tend\r\n\tend\r\n\t    for file in lfs.dir(path) do\r\n\t        if file ~= \".\" and file ~= \"..\" then\r\n\r\n\t            local f = path..'/'..file\r\n\t            local attr = lfs.attributes (f)\r\n\r\n\t            assert (type(attr) == \"table\")\r\n\t            if attr.mode == \"directory\" then\r\n\t\t\t\t\tlocal dir_address = address .. \"/dir_\" .. file .. \".lua\"\r\n\t\t\t\t\tlocal dir_ast = createTableStructure(f)\r\n\t \t\t\t\tlocal dir_file = io.open(dir_address, \"w\")\r\n\t\t\t\t\tdir_file:write(gdu.generateReturnTable(dir_ast,file))\r\n\t\t\t\t\tdir_file:close()\r\n\r\n\t\t\t\t\taddress = address .. \"/\" ..file\r\n\t\t\t\t\tlfs.mkdir(address)\r\n\t \t\t\t\tcreate = false\r\n\r\n\t                createFileStructure (f, address)\r\n\t                address = address .. \"/..\"\r\n\t            else\r\n\t               \tif string.find(file, \"%.lua\") ~= nil then\t\t\t--matching all *.lua files\r\n\t            \t\tlocal add = address .. \"/\" .. file\r\n\t            \t\tlocal path2 = path\r\n\t            \t\tpath = path .. \"/\" .. file\r\n\t            \t\tlocal ast = createTableStructure(path)\r\n\t            \t\tpath = path2\r\n\r\n\t            \t\tfile = io.open(add, \"w\")\r\n\t\t\t\t\t\tfile:write(gdu.generateReturnTable(ast,nil))\r\n\t\t\t\t\t\tfile:close()\r\n\t            \tend\r\n\t            end\r\n\t        end\r\n\t    end\r\nend",
    "type": "function"
  }, {
    "id": 19,
    "text": "if (create == true) then\r\n\t\tif address ~= nil then\r\n\r\n\t\t\tlfs.mkdir(address .. \"/_getdoc\")\r\n\t\t\taddress = address .. \"/_getdoc\"\r\n\t\telse\r\n\t\t\tlfs.mkdir(\"_getdoc\")\r\n\t\t\taddress = lfs.currentdir() .. \"/_getdoc\"\r\n\r\n\t\tend\r\n\r\n\t \tif(string.find(path, \"%.lua\") ~= nil) then\r\n\t\t\tlocal file = string.match(path, \"%/%a+%.lua\")\r\n\t\t    local ast = createTableStructure(path)\r\n\r\n\t\t\taddress = address .. file\r\n\t\t\tfile = io.open(address, \"w\")\r\n\t\t\tfile:write(gdu.generateReturnTable(ast))\r\n\t\t\tfile:close()\r\n\t\t\treturn\r\n\t\tend\r\n\tend",
    "type": "statement:if"
  }, {
    "id": 20,
    "text": "if address ~= nil then\r\n\r\n\t\t\tlfs.mkdir(address .. \"/_getdoc\")\r\n\t\t\taddress = address .. \"/_getdoc\"\r\n\t\telse\r\n\t\t\tlfs.mkdir(\"_getdoc\")\r\n\t\t\taddress = lfs.currentdir() .. \"/_getdoc\"\r\n\r\n\t\tend",
    "type": "statement:if"
  }, {
    "id": 21,
    "text": "lfs.mkdir(address .. \"/_getdoc\")",
    "type": "statement:functioncall"
  }, {
    "id": 22,
    "text": "address = address .. \"/_getdoc\"",
    "type": "statement:assign"
  }, {
    "id": 23,
    "text": "lfs.mkdir(\"_getdoc\")",
    "type": "statement:functioncall"
  }, {
    "id": 24,
    "text": "address = lfs.currentdir() .. \"/_getdoc\"",
    "type": "statement:assign"
  }, {
    "id": 25,
    "text": "if(string.find(path, \"%.lua\") ~= nil) then\r\n\t\t\tlocal file = string.match(path, \"%/%a+%.lua\")\r\n\t\t    local ast = createTableStructure(path)\r\n\r\n\t\t\taddress = address .. file\r\n\t\t\tfile = io.open(address, \"w\")\r\n\t\t\tfile:write(gdu.generateReturnTable(ast))\r\n\t\t\tfile:close()\r\n\t\t\treturn\r\n\t\tend",
    "type": "statement:if"
  }, {
    "id": 26,
    "text": "local file = string.match(path, \"%/%a+%.lua\")",
    "type": "statement:localassign"
  }, {
    "id": 27,
    "text": "local ast = createTableStructure(path)",
    "type": "statement:localassign"
  }, {
    "id": 28,
    "text": "address = address .. file",
    "type": "statement:assign"
  }, {
    "id": 29,
    "text": "file = io.open(address, \"w\")",
    "type": "statement:assign"
  }, {
    "id": 30,
    "text": "file:write(gdu.generateReturnTable(ast))",
    "type": "statement:functioncall"
  }, {
    "id": 31,
    "text": "file:close()",
    "type": "statement:functioncall"
  }, {
    "id": 32,
    "text": "for file in lfs.dir(path) do\r\n\t        if file ~= \".\" and file ~= \"..\" then\r\n\r\n\t            local f = path..'/'..file\r\n\t            local attr = lfs.attributes (f)\r\n\r\n\t            assert (type(attr) == \"table\")\r\n\t            if attr.mode == \"directory\" then\r\n\t\t\t\t\tlocal dir_address = address .. \"/dir_\" .. file .. \".lua\"\r\n\t\t\t\t\tlocal dir_ast = createTableStructure(f)\r\n\t \t\t\t\tlocal dir_file = io.open(dir_address, \"w\")\r\n\t\t\t\t\tdir_file:write(gdu.generateReturnTable(dir_ast,file))\r\n\t\t\t\t\tdir_file:close()\r\n\r\n\t\t\t\t\taddress = address .. \"/\" ..file\r\n\t\t\t\t\tlfs.mkdir(address)\r\n\t \t\t\t\tcreate = false\r\n\r\n\t                createFileStructure (f, address)\r\n\t                address = address .. \"/..\"\r\n\t            else\r\n\t               \tif string.find(file, \"%.lua\") ~= nil then\t\t\t--matching all *.lua files\r\n\t            \t\tlocal add = address .. \"/\" .. file\r\n\t            \t\tlocal path2 = path\r\n\t            \t\tpath = path .. \"/\" .. file\r\n\t            \t\tlocal ast = createTableStructure(path)\r\n\t            \t\tpath = path2\r\n\r\n\t            \t\tfile = io.open(add, \"w\")\r\n\t\t\t\t\t\tfile:write(gdu.generateReturnTable(ast,nil))\r\n\t\t\t\t\t\tfile:close()\r\n\t            \tend\r\n\t            end\r\n\t        end\r\n\t    end",
    "type": "statement:genericfor"
  }, {
    "id": 33,
    "text": "if file ~= \".\" and file ~= \"..\" then\r\n\r\n\t            local f = path..'/'..file\r\n\t            local attr = lfs.attributes (f)\r\n\r\n\t            assert (type(attr) == \"table\")\r\n\t            if attr.mode == \"directory\" then\r\n\t\t\t\t\tlocal dir_address = address .. \"/dir_\" .. file .. \".lua\"\r\n\t\t\t\t\tlocal dir_ast = createTableStructure(f)\r\n\t \t\t\t\tlocal dir_file = io.open(dir_address, \"w\")\r\n\t\t\t\t\tdir_file:write(gdu.generateReturnTable(dir_ast,file))\r\n\t\t\t\t\tdir_file:close()\r\n\r\n\t\t\t\t\taddress = address .. \"/\" ..file\r\n\t\t\t\t\tlfs.mkdir(address)\r\n\t \t\t\t\tcreate = false\r\n\r\n\t                createFileStructure (f, address)\r\n\t                address = address .. \"/..\"\r\n\t            else\r\n\t               \tif string.find(file, \"%.lua\") ~= nil then\t\t\t--matching all *.lua files\r\n\t            \t\tlocal add = address .. \"/\" .. file\r\n\t            \t\tlocal path2 = path\r\n\t            \t\tpath = path .. \"/\" .. file\r\n\t            \t\tlocal ast = createTableStructure(path)\r\n\t            \t\tpath = path2\r\n\r\n\t            \t\tfile = io.open(add, \"w\")\r\n\t\t\t\t\t\tfile:write(gdu.generateReturnTable(ast,nil))\r\n\t\t\t\t\t\tfile:close()\r\n\t            \tend\r\n\t            end\r\n\t        end",
    "type": "statement:if"
  }, {
    "id": 34,
    "text": "if attr.mode == \"directory\" then\r\n\t\t\t\t\tlocal dir_address = address .. \"/dir_\" .. file .. \".lua\"\r\n\t\t\t\t\tlocal dir_ast = createTableStructure(f)\r\n\t \t\t\t\tlocal dir_file = io.open(dir_address, \"w\")\r\n\t\t\t\t\tdir_file:write(gdu.generateReturnTable(dir_ast,file))\r\n\t\t\t\t\tdir_file:close()\r\n\r\n\t\t\t\t\taddress = address .. \"/\" ..file\r\n\t\t\t\t\tlfs.mkdir(address)\r\n\t \t\t\t\tcreate = false\r\n\r\n\t                createFileStructure (f, address)\r\n\t                address = address .. \"/..\"\r\n\t            else\r\n\t               \tif string.find(file, \"%.lua\") ~= nil then\t\t\t--matching all *.lua files\r\n\t            \t\tlocal add = address .. \"/\" .. file\r\n\t            \t\tlocal path2 = path\r\n\t            \t\tpath = path .. \"/\" .. file\r\n\t            \t\tlocal ast = createTableStructure(path)\r\n\t            \t\tpath = path2\r\n\r\n\t            \t\tfile = io.open(add, \"w\")\r\n\t\t\t\t\t\tfile:write(gdu.generateReturnTable(ast,nil))\r\n\t\t\t\t\t\tfile:close()\r\n\t            \tend\r\n\t            end",
    "type": "statement:if"
  }, {
    "id": 35,
    "text": "local dir_address = address .. \"/dir_\" .. file .. \".lua\"",
    "type": "statement:localassign"
  }, {
    "id": 36,
    "text": "local dir_ast = createTableStructure(f)",
    "type": "statement:localassign"
  }, {
    "id": 37,
    "text": "local dir_file = io.open(dir_address, \"w\")",
    "type": "statement:localassign"
  }, {
    "id": 38,
    "text": "dir_file:write(gdu.generateReturnTable(dir_ast,file))",
    "type": "statement:functioncall"
  }, {
    "id": 39,
    "text": "dir_file:close()",
    "type": "statement:functioncall"
  }, {
    "id": 40,
    "text": "address = address .. \"/\" ..file",
    "type": "statement:assign"
  }, {
    "id": 41,
    "text": "lfs.mkdir(address)",
    "type": "statement:functioncall"
  }, {
    "id": 42,
    "text": "create = false",
    "type": "statement:assign"
  }, {
    "id": 43,
    "text": "createFileStructure (f, address)",
    "type": "statement:functioncall"
  }, {
    "id": 44,
    "text": "address = address .. \"/..\"",
    "type": "statement:assign"
  }, {
    "id": 45,
    "text": "if string.find(file, \"%.lua\") ~= nil then\t\t\t--matching all *.lua files\r\n\t            \t\tlocal add = address .. \"/\" .. file\r\n\t            \t\tlocal path2 = path\r\n\t            \t\tpath = path .. \"/\" .. file\r\n\t            \t\tlocal ast = createTableStructure(path)\r\n\t            \t\tpath = path2\r\n\r\n\t            \t\tfile = io.open(add, \"w\")\r\n\t\t\t\t\t\tfile:write(gdu.generateReturnTable(ast,nil))\r\n\t\t\t\t\t\tfile:close()\r\n\t            \tend",
    "type": "statement:if"
  }, {
    "id": 46,
    "text": "local add = address .. \"/\" .. file",
    "type": "statement:localassign"
  }, {
    "id": 47,
    "text": "local path2 = path",
    "type": "statement:localassign"
  }, {
    "id": 48,
    "text": "path = path .. \"/\" .. file",
    "type": "statement:assign"
  }, {
    "id": 49,
    "text": "path = path2",
    "type": "statement:assign"
  }, {
    "id": 50,
    "text": "file = io.open(add, \"w\")",
    "type": "statement:assign"
  }, {
    "id": 51,
    "text": "file:write(gdu.generateReturnTable(ast,nil))",
    "type": "statement:functioncall"
  }, {
    "id": 52,
    "text": "",
    "type": "blank lines"
  }, {
    "id": 53,
    "text": "function getdocRequire(req, getdoc_path)\r\n\tlocal path = {}\r\n\tlocal final_path = \"\"\r\n\tlocal final_req = \"_getdoc.\"\r\n\tlocal f\r\n\tlocal pp = package.path\r\n\r\n\tfor part in string.gmatch(req, \"([^.]+)\") do\r\n\t\ttable.insert(path,part)\r\n\tend\r\n\r\n\tif gdu.searchFile(getdoc_path) == \"directory\" then\r\n\t\tfinal_path = getdoc_path .. \"/\"\r\n\telseif gdu.searchFile(lfs.currentdir() .. \"/_getdoc\") == \"directory\" then\r\n\t\tfinal_path = lfs.currentdir() .. \"/_getdoc/\"\r\n\telseif gdu.searchFile(lfs.currentdir() .. \"/../_getdoc\") == \"directory\" then\r\n\t\tfinal_path = lfs.currentdir() .. \"/../_getdoc/\"\r\n\telseif gdu.searchFile(lfs.currentdir() .. \"/../lib/lua/_getdoc\") == \"directory\" then\r\n\t\tfinal_path = lfs.currentdir() .. \"/../lib/lua/_getdoc/\"\r\n\telseif gdu.searchFile(lfs.currentdir() .. \"/../share/_getdoc\") == \"directory\" then\r\n\t\tfinal_path = lfs.currentdir() .. \"/../share/_getdoc/\"\r\n\telse\r\n\t\treturn\r\n\tend\r\n\r\n\tlocal i = 1\r\n\r\n\twhile i <= table.getn(path) do\r\n\r\n\t\tif gdu.searchFile(final_path .. \"/\" .. path[i]) == \"directory\" then\r\n\t\t\tfinal_path = final_path .. path[i] .. \"/\"\r\n\t\t\tfinal_req = final_req .. path[i] .. \".\"\r\n\t\telseif (gdu.searchFile(final_path .. \"/\" .. path[i] ..\".lua\")) == \"file\" then\r\n\t\t\tfinal_req = final_req .. path[i]\r\n\t\t\tfinal_path = final_path .. \"/\" .. path[i] ..\".lua\"\r\n\r\n\t\t\tpackage.path = package.path .. \";\" .. final_path\r\n\r\n\t\t\tf = require(final_req)\r\n\t\t\tbreak\r\n\t\telse\r\n\t\t\treturn\r\n\t\tend\r\n\t\ti = i + 1\r\n\tend\r\n\r\n\twhile i <= table.getn(path) do\r\n\t\ti = i + 1\r\n\r\n\t\tfor k,v in pairs(f) do\r\n\t\t\tif k == path[i] then\r\n\t\t\t\tf = v\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\r\n\tpackage.path = pp\r\n\treturn f\r\nend",
    "type": "function"
  }, {
    "id": 54,
    "text": "local path = {}",
    "type": "statement:localassign"
  }, {
    "id": 55,
    "text": "local final_path = \"\"",
    "type": "statement:localassign"
  }, {
    "id": 56,
    "text": "local final_req = \"_getdoc.\"",
    "type": "statement:localassign"
  }, {
    "id": 57,
    "text": "local f",
    "type": "statement:localassign"
  }, {
    "id": 58,
    "text": "local pp = package.path",
    "type": "statement:localassign"
  }, {
    "id": 59,
    "text": "for part in string.gmatch(req, \"([^.]+)\") do\r\n\t\ttable.insert(path,part)\r\n\tend",
    "type": "statement:genericfor"
  }, {
    "id": 60,
    "text": "table.insert(path,part)",
    "type": "statement:functioncall"
  }, {
    "id": 61,
    "text": "if gdu.searchFile(getdoc_path) == \"directory\" then\r\n\t\tfinal_path = getdoc_path .. \"/\"\r\n\telseif gdu.searchFile(lfs.currentdir() .. \"/_getdoc\") == \"directory\" then\r\n\t\tfinal_path = lfs.currentdir() .. \"/_getdoc/\"\r\n\telseif gdu.searchFile(lfs.currentdir() .. \"/../_getdoc\") == \"directory\" then\r\n\t\tfinal_path = lfs.currentdir() .. \"/../_getdoc/\"\r\n\telseif gdu.searchFile(lfs.currentdir() .. \"/../lib/lua/_getdoc\") == \"directory\" then\r\n\t\tfinal_path = lfs.currentdir() .. \"/../lib/lua/_getdoc/\"\r\n\telseif gdu.searchFile(lfs.currentdir() .. \"/../share/_getdoc\") == \"directory\" then\r\n\t\tfinal_path = lfs.currentdir() .. \"/../share/_getdoc/\"\r\n\telse\r\n\t\treturn\r\n\tend",
    "type": "statement:if"
  }, {
    "id": 62,
    "text": "final_path = getdoc_path .. \"/\"",
    "type": "statement:assign"
  }, {
    "id": 63,
    "text": "final_path = lfs.currentdir() .. \"/_getdoc/\"",
    "type": "statement:assign"
  }, {
    "id": 64,
    "text": "final_path = lfs.currentdir() .. \"/../_getdoc/\"",
    "type": "statement:assign"
  }, {
    "id": 65,
    "text": "final_path = lfs.currentdir() .. \"/../lib/lua/_getdoc/\"",
    "type": "statement:assign"
  }, {
    "id": 66,
    "text": "final_path = lfs.currentdir() .. \"/../share/_getdoc/\"",
    "type": "statement:assign"
  }, {
    "id": 67,
    "text": "local i = 1",
    "type": "statement:localassign"
  }, {
    "id": 68,
    "text": "while i <= table.getn(path) do\r\n\r\n\t\tif gdu.searchFile(final_path .. \"/\" .. path[i]) == \"directory\" then\r\n\t\t\tfinal_path = final_path .. path[i] .. \"/\"\r\n\t\t\tfinal_req = final_req .. path[i] .. \".\"\r\n\t\telseif (gdu.searchFile(final_path .. \"/\" .. path[i] ..\".lua\")) == \"file\" then\r\n\t\t\tfinal_req = final_req .. path[i]\r\n\t\t\tfinal_path = final_path .. \"/\" .. path[i] ..\".lua\"\r\n\r\n\t\t\tpackage.path = package.path .. \";\" .. final_path\r\n\r\n\t\t\tf = require(final_req)\r\n\t\t\tbreak\r\n\t\telse\r\n\t\t\treturn\r\n\t\tend\r\n\t\ti = i + 1\r\n\tend",
    "type": "statement:while"
  }, {
    "id": 69,
    "text": "if gdu.searchFile(final_path .. \"/\" .. path[i]) == \"directory\" then\r\n\t\t\tfinal_path = final_path .. path[i] .. \"/\"\r\n\t\t\tfinal_req = final_req .. path[i] .. \".\"\r\n\t\telseif (gdu.searchFile(final_path .. \"/\" .. path[i] ..\".lua\")) == \"file\" then\r\n\t\t\tfinal_req = final_req .. path[i]\r\n\t\t\tfinal_path = final_path .. \"/\" .. path[i] ..\".lua\"\r\n\r\n\t\t\tpackage.path = package.path .. \";\" .. final_path\r\n\r\n\t\t\tf = require(final_req)\r\n\t\t\tbreak\r\n\t\telse\r\n\t\t\treturn\r\n\t\tend",
    "type": "statement:if"
  }, {
    "id": 70,
    "text": "final_path = final_path .. path[i] .. \"/\"",
    "type": "statement:assign"
  }, {
    "id": 71,
    "text": "final_req = final_req .. path[i] .. \".\"",
    "type": "statement:assign"
  }, {
    "id": 72,
    "text": "final_req = final_req .. path[i]",
    "type": "statement:assign"
  }, {
    "id": 73,
    "text": "final_path = final_path .. \"/\" .. path[i] ..\".lua\"",
    "type": "statement:assign"
  }, {
    "id": 74,
    "text": "package.path = package.path .. \";\" .. final_path",
    "type": "statement:assign"
  }, {
    "id": 75,
    "text": "f = require(final_req)",
    "type": "statement:assign"
  }, {
    "id": 76,
    "text": "i = i + 1",
    "type": "statement:assign"
  }, {
    "id": 77,
    "text": "while i <= table.getn(path) do\r\n\t\ti = i + 1\r\n\r\n\t\tfor k,v in pairs(f) do\r\n\t\t\tif k == path[i] then\r\n\t\t\t\tf = v\r\n\t\t\tend\r\n\t\tend\r\n\tend",
    "type": "statement:while"
  }, {
    "id": 78,
    "text": "for k,v in pairs(f) do\r\n\t\t\tif k == path[i] then\r\n\t\t\t\tf = v\r\n\t\t\tend\r\n\t\tend",
    "type": "statement:genericfor"
  }, {
    "id": 79,
    "text": "if k == path[i] then\r\n\t\t\t\tf = v\r\n\t\t\tend",
    "type": "statement:if"
  }, {
    "id": 80,
    "text": "f = v",
    "type": "statement:assign"
  }, {
    "id": 81,
    "text": "package.path = pp",
    "type": "statement:assign"
  }, {
    "id": 82,
    "text": "",
    "type": "blank lines"
  }, {
    "id": 83,
    "text": "",
    "type": "function container"
  }, {
    "id": 84,
    "text": "function getAstFromFile(filepath)\r\n\tlocal f, text\r\n\tlocal ast\r\n\r\n\tf = io.input(filepath)\r\n\ttext = f:read(\"*a\")\r\n\tf:close()\r\n\r\n\tast = m.processText(text)\r\n\r\n\treturn ast\r\nend",
    "type": "function"
  }, {
    "id": 85,
    "text": "function createTableOfComments(ast)\r\n\tlocal comment=nil\r\n\tlocal func_name=nil\r\n\r\n\tif (only == true) then\r\n\t\tfor k,v in pairs(func_table) do\r\n\t\t\tfunc_table[k] = nil\r\n\t\tend\r\n\t\tonly = false\r\n\tend\r\n\r\n\r\n\tif type(ast.data) == \"table\"  then\r\n\r\n\t\tif(ast.key==\"LocalFunction\" or ast.key==\"GlobalFunction\")then\r\n\r\n\t\t\tlocal info = {}\r\n\t\t\tinfo.type = \"function\"\r\n\t\t\tlocal param = {}\r\n   \t\t\tlocal var = {}\r\n   \t\t\tlocal ret = {}\r\n   \t\t\tlocal descr = \"\"\r\n   \t\t\tlocal fname = \"\"\r\n\r\n\t\t\tfunc_name = ast.name\r\n\t\t\tcomment = mu.getComment(ast)\r\n\r\n\t\t\tif (comment) then\r\n\t\t\t\tfor line in string.gmatch(comment, \"[^\\n]+\") do\r\n\t   \t\t\t\tlocal parsed = comments.Parse(line,\"luadoc\")\r\n\r\n\r\n\t   \t\t\t\tif parsed ~= nil then\r\n\t\t \t\t\t\tif parsed.type == \"name\" then\r\n\t\t \t\t\t\t\tfname = parsed.name\r\n\t\t \t\t\t\telseif parsed.type == \"param\" then\r\n\t\t \t\t\t\t\tvar[parsed.name] = parsed.text\r\n\r\n\t\t \t\t\t\telseif parsed.type == \"return\" then\r\n\t\t \t\t\t\t\tlocal r = string.match(parsed.text,\"[^%s]*\")\r\n\t\t \t\t\t\t\tret[r] = string.sub(parsed.text,string.len(r)+1)\r\n\t\t \t\t\t\telseif parsed.type == \"descr\" then\r\n\t\t \t\t\t\t\tdescr = descr .. parsed.text\r\n\t\t \t\t\t\tend\r\n\t\t \t\t\tend\r\n\t\t\t\tend\r\n\t\t\tend\r\n\t\t\tinfo.parameters = var\r\n\t\t\tinfo.returns = ret\r\n\t\t\tinfo.description = descr\r\n\t\t\tinfo.name = fname\r\n\t\t\tfunc_table[func_name] = info\r\n\t\t\treturn\r\n\t\tend\r\n\r\n\t\tfor k,v in pairs(ast.data) do\r\n\r\n\t\t\tcreateTableOfComments(v)\r\n\r\n\t\tend\r\n\t\treturn func_table\r\n\tend\r\nend",
    "type": "function"
  }, {
    "id": 86,
    "text": "function generateReturnTable(ast, dir)\r\n\r\n\tif dir ~= nil then\r\n\r\n\t\tret_table = 'return \\n{ ' .. dir .. ' = { \\n'\r\n\telse\r\n\t\tret_table = 'return \\n{ '\r\n\tend\r\n\r\n\tfor k,v in pairs(ast) do\r\n\r\n\t\tif v.type == \"function\" then\r\n\r\n\t\t\tret_table = ret_table .. '\\t' .. k .. ' = { \\n'\r\n\r\n\t\t    for a,b in pairs(v) do\r\n\r\n\t\t    \tif type(b) == \"table\" then\r\n\r\n\t\t    \t\tret_table = ret_table .. '\\t\\t' .. a .. ' = { \\n'\r\n\r\n\t\t    \t\tfor c,d in pairs(b) do\r\n\t\t    \t\t\tif type(d) == \"table\" then\r\n\r\n\t\t    \t\t\t\tret_table = ret_table .. '\\t\\t\\t' .. c .. ' = { ' ..  '\\n'\r\n\r\n\t\t    \t\t\t\tfor e,f in pairs(d) do\r\n\t\t    \t\t\t\t\tret_table = ret_table .. '\\t\\t\\t\\t' .. e .. \" = [[\" .. f .. \"]],\\n\"\r\n\t\t    \t\t\t\tend\r\n\t\t    \t\t\t\tret_table = ret_table .. '\\t\\t\\t}, \\n'\r\n\r\n\t\t    \t\t\telse ret_table = ret_table .. '\\t\\t\\t' .. c .. \" = [[\" .. d .. \"]],\\n\"\r\n\r\n\t\t    \t\t\tend\r\n\r\n\t\t    \t\tend\r\n\t\t    \t\tret_table = ret_table ..'\\t\\t}, \\n'\r\n\t\t    \telse\r\n\t\t    \t\tret_table = ret_table .. '\\t\\t' .. a .. \" = [[\" .. b .. \"]],\\n\"\r\n\t\t    \tend\r\n\r\n\t\t    end\r\n\t\t    ret_table = ret_table .. '\\t}, \\n'\r\n\r\n\t\telseif dir ~= nil then\r\n\t\t\tgenerateReturnTable(v,dir)\r\n\t\t\tret_table = ret_table ..'\\t} \\n}'\r\n\t\t\telse generateReturnTable(v,nil)\r\n\r\n\r\n\t\t    ret_table = ret_table ..'} \\n'\r\n\t\tend\r\n\tend\r\n\r\n\tonly = true\r\n\treturn ret_table\r\nend",
    "type": "function"
  }, {
    "id": 87,
    "text": "function searchFile(path)\r\n\tlocal attr = lfs.attributes (path)\r\n\tif type(attr) == \"table\" then\r\n\r\n\t\tif (attr.mode == \"directory\") then\r\n\t\t\treturn \"directory\"\r\n\t\telseif (attr.mode == \"file\") then\r\n\t\t\treturn \"file\"\r\n\t\tend\r\n\telse\r\n\t\treturn nil\r\n\tend\r\n\treturn nil\r\nend",
    "type": "function"
  }, {
    "id": 88,
    "text": "io",
    "type": "module"
  }, {
    "id": 89,
    "text": "lfs",
    "type": "module"
  }, {
    "id": 90,
    "text": "currentdir",
    "type": "global function"
  }, {
    "id": 91,
    "text": "mkdir",
    "type": "global function"
  }, {
    "id": 92,
    "text": "dir",
    "type": "global function"
  }, {
    "id": 93,
    "text": "attributes",
    "type": "global function"
  }, {
    "id": 94,
    "text": "open",
    "type": "global function"
  }, {
    "id": 95,
    "text": "assert",
    "type": "global function"
  }, {
    "id": 96,
    "text": "pairs",
    "type": "global function"
  }, {
    "id": 97,
    "text": "type",
    "type": "global function"
  }, {
    "id": 98,
    "text": "getn",
    "type": "global function"
  }, {
    "id": 99,
    "text": "insert",
    "type": "global function"
  }, {
    "id": 100,
    "text": "module",
    "type": "global function"
  }, {
    "id": 101,
    "text": "match",
    "type": "global function"
  }, {
    "id": 102,
    "text": "gmatch",
    "type": "global function"
  }, {
    "id": 103,
    "text": "require",
    "type": "global function"
  }, {
    "id": 104,
    "text": "find",
    "type": "global function"
  }, {
    "id": 105,
    "text": "",
    "type": "variable container"
  }, {
    "id": 106,
    "text": "",
    "type": "require container"
  }, {
    "id": 107,
    "text": "",
    "type": "local variable"
  }, {
    "id": 108,
    "text": "",
    "type": "n/a"
  }, {
    "id": 109,
    "text": "",
    "type": "local variable"
  }, {
    "id": 110,
    "text": "",
    "type": "n/a"
  }, {
    "id": 111,
    "text": "",
    "type": "local variable"
  }, {
    "id": 112,
    "text": "",
    "type": "n/a"
  }, {
    "id": 113,
    "text": "",
    "type": "local variable"
  }, {
    "id": 114,
    "text": "",
    "type": "n/a"
  }, {
    "id": 115,
    "text": "",
    "type": "local variable"
  }, {
    "id": 116,
    "text": "",
    "type": "n/a"
  }, {
    "id": 117,
    "text": "",
    "type": "local variable"
  }, {
    "id": 118,
    "text": "",
    "type": "n/a"
  }, {
    "id": 119,
    "text": "",
    "type": "local variable"
  }, {
    "id": 120,
    "text": "",
    "type": "n/a"
  }, {
    "id": 121,
    "text": "",
    "type": "local variable"
  }, {
    "id": 122,
    "text": "",
    "type": "n/a"
  }, {
    "id": 123,
    "text": "",
    "type": "local variable"
  }, {
    "id": 124,
    "text": "",
    "type": "boolean"
  }, {
    "id": 125,
    "text": "",
    "type": "local variable"
  }, {
    "id": 126,
    "text": "",
    "type": "require local variable"
  }, {
    "id": 127,
    "text": "",
    "type": "require local variable"
  }, {
    "id": 128,
    "text": "",
    "type": "require local variable"
  } ]
}